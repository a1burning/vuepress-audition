---
title: 实现数组方法
tags: 
  - programming
date: 2022-03-13
prev: false
next: ./02.md
sidebarDepth: 5
---

[[toc]]

## 实现原生方法
### map

```js
Array.prototype._map = function(callback) {
    const arr = this
    const result = []
    this.forEach((val, index) => {
        result.push(callback.call(arr, val, index, arr))
    })
    return result
}
```

```js
Array.prototype._map = function(callback) {
    const arr = this
    return this.reduce((prev, item, index, arr) => {
        prev.push(callback(item, index, arr))
        return prev
    }, [])
}

```

### reduce

```js
Array.prototype._reduce = function(fn, initval) {
    const arr = this
    let base = typeof initval === 'undefined' ? arr[0] : initval
    let initIndex = typeof initval === 'undefined' ? 0 : 1
    arr.slice(initIndex).forEach((val, index) => {
        base = fn(base, val, initIndex + index, arr)
    })
    return base
}

```

### flat

```js
Array.prototype._flat = function(depth = 1){
    let res = [...this]
    while(depth && res.some(item => Array.isArray(item))) {
        res = [].concat(...res)
        depth--
    }
    return res
}
```

## 变异方法

### 将数组拍平成二维数组

let arr = [1, [2, 3], [4, 5, [6, 7]]]
```js
function maxDepth(arr) {
    if (!Array.isArray(arr)) return 0
    let res = 0
    let max = 0
    arr.forEach(val => {
        res = maxDepth(val)
        max = max >= res ? max : res
    })
    return max + 1
}
```
### 将下列数组拍平

```js
```